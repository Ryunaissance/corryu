<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ìƒê´€ê´€ê³„ ë¶„ì„ â€” CORRYU</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
<script src="/i18n.js"></script>
<style>
:root {
  --bg-primary: #0a0d14; --bg-card: rgba(18,22,36,0.92);
  --border: rgba(255,255,255,0.07); --text-primary: #e2e8f0;
  --text-muted: #64748b; --accent: #3b82f6;
}
* { box-sizing: border-box; margin: 0; padding: 0; }
body { background: var(--bg-primary); color: var(--text-primary); font-family: 'Inter', sans-serif; min-height: 100vh; -webkit-font-smoothing: antialiased; }
.glass { background: var(--bg-card); backdrop-filter: blur(16px); border: 1px solid var(--border); border-radius: 14px; }
.gradient-line { position: fixed; top: 0; left: 0; right: 0; height: 3px; z-index: 200; background: linear-gradient(90deg,#3b82f6,#8b5cf6,#ec4899,#f59e0b); }
.text-gradient { background: linear-gradient(135deg,#60a5fa,#a78bfa); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
nav { position: fixed; top: 3px; left: 0; right: 0; z-index: 100; background: rgba(10,13,20,0.9); backdrop-filter: blur(20px); border-bottom: 1px solid var(--border); height: 56px; display: flex; align-items: center; }
.nav-inner { max-width: 1400px; margin: 0 auto; padding: 0 24px; width: 100%; display: flex; align-items: center; gap: 14px; }
.nav-back { display: flex; align-items: center; gap: 6px; color: var(--text-muted); font-size: 0.82rem; font-weight: 600; text-decoration: none; transition: color 0.15s; }
.nav-back:hover { color: #60a5fa; }
.nav-link { font-size: 0.78rem; color: var(--text-muted); text-decoration: none; font-weight: 600; display: flex; align-items: center; gap: 4px; transition: color 0.15s; }
.nav-link:hover { color: var(--text-primary); }
.main-wrap { max-width: 1400px; margin: 0 auto; padding: 76px 20px 56px; }
#loading-bar { height: 3px; background: linear-gradient(90deg,#3b82f6,#8b5cf6); position: fixed; top: 59px; left: 0; width: 0; z-index: 99; transition: width 0.4s ease; }

/* â”€â”€ Selector â”€â”€ */
.selector-card { padding: 20px 24px; margin-bottom: 16px; }
.page-header { display: flex; align-items: baseline; gap: 12px; margin-bottom: 16px; }
.page-title { font-size: 1.45rem; font-weight: 900; letter-spacing: -0.03em; }
.page-sub { font-size: 0.8rem; color: var(--text-muted); }
.selector-row { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
.ticker-chip {
  display: inline-flex; align-items: center; gap: 5px;
  padding: 5px 10px; border-radius: 7px; font-size: 0.85rem; font-weight: 800;
  border: 1px solid; cursor: default; transition: all 0.15s;
}
.chip-close { background: none; border: none; cursor: pointer; font-size: 0.82rem; opacity: 0.5; padding: 0; line-height: 1; font-family: inherit; transition: opacity 0.15s; }
.chip-close:hover { opacity: 1; }
.add-wrap { display: flex; gap: 0; background: rgba(255,255,255,0.04); border: 1px solid var(--border); border-radius: 8px; overflow: hidden; }
.add-input { background: none; border: none; outline: none; color: var(--text-primary); font-size: 0.85rem; font-family: inherit; padding: 7px 10px; width: 130px; text-transform: uppercase; }
.add-input::placeholder { color: var(--text-muted); text-transform: none; }
.add-btn { background: none; border: none; border-left: 1px solid var(--border); color: #60a5fa; font-size: 0.8rem; font-weight: 700; padding: 7px 12px; cursor: pointer; font-family: inherit; transition: background 0.15s; }
.add-btn:hover { background: rgba(59,130,246,0.1); }
.preset-label { font-size: 0.72rem; color: var(--text-muted); font-weight: 600; margin-top: 10px; margin-bottom: 6px; }
.preset-btn { padding: 4px 10px; border-radius: 6px; background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.08); color: #94a3b8; font-size: 0.75rem; font-weight: 600; cursor: pointer; font-family: inherit; transition: all 0.15s; }
.preset-btn:hover { background: rgba(255,255,255,0.09); color: var(--text-primary); }
.error-msg { font-size: 0.75rem; color: #f87171; min-height: 16px; margin-top: 6px; }

/* â”€â”€ 2-column layout â”€â”€ */
.analysis-grid { display: grid; grid-template-columns: 380px 1fr; gap: 14px; margin-bottom: 14px; }
@media(max-width:1000px) { .analysis-grid { grid-template-columns: 1fr; } }

/* â”€â”€ Stats table â”€â”€ */
.card { padding: 20px 22px; }
.card-title { font-size: 0.73rem; font-weight: 700; letter-spacing: 0.07em; text-transform: uppercase; color: var(--text-muted); margin-bottom: 14px; display: flex; align-items: center; gap: 8px; }
.card-title::after { content:''; flex:1; height:1px; background:var(--border); }
.stats-table { width: 100%; border-collapse: collapse; }
.stats-table th { font-size: 0.68rem; color: var(--text-muted); font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em; padding: 5px 8px; text-align: right; border-bottom: 1px solid var(--border); }
.stats-table th:first-child { text-align: left; }
.stats-table td { padding: 8px 8px; font-size: 0.84rem; font-weight: 700; text-align: right; border-bottom: 1px solid rgba(255,255,255,0.025); font-variant-numeric: tabular-nums; }
.stats-table td:first-child { text-align: left; }
.stats-table tr:last-child td { border-bottom: none; }
.ticker-cell { display: flex; align-items: center; gap: 7px; }
.ticker-dot { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; }
.ticker-name { font-weight: 800; font-size: 0.86rem; }
.ret-pos { color: #4ade80; }
.ret-neg { color: #f87171; }
.ret-na  { color: #334155; }

/* â”€â”€ Heatmap â”€â”€ */
.heatmap-wrap { overflow-x: auto; }
.heatmap-table { border-collapse: collapse; }
.heatmap-table th { font-size: 0.75rem; font-weight: 800; padding: 6px 8px; color: var(--text-muted); }
.heatmap-table td { padding: 0; width: 58px; height: 52px; text-align: center; font-size: 0.82rem; font-weight: 800; font-variant-numeric: tabular-nums; position: relative; border: 1px solid rgba(255,255,255,0.03); }
.heat-cell { width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 1px; border-radius: 4px; }
.heat-val { font-size: 0.82rem; font-weight: 800; }
.heat-diag { opacity: 0.5; font-size: 0.7rem; }

/* â”€â”€ Scatter plot â”€â”€ */
.scatter-card { margin-bottom: 14px; }
.scatter-container { width: 100%; height: 320px; position: relative; overflow: hidden; }

/* â”€â”€ Insight card â”€â”€ */
.insight-card { padding: 18px 22px; margin-bottom: 14px; }
.insight-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
@media(max-width:700px) { .insight-grid { grid-template-columns: 1fr; } }
.insight-item { padding: 14px; border: 1px solid var(--border); border-radius: 10px; background: rgba(255,255,255,0.015); }
.insight-badge { font-size: 0.68rem; font-weight: 700; letter-spacing: 0.05em; padding: 2px 7px; border-radius: 4px; margin-bottom: 8px; display: inline-block; }
.insight-pair { font-size: 0.92rem; font-weight: 900; margin-bottom: 4px; }
.insight-val { font-size: 1.1rem; font-weight: 900; letter-spacing: -0.02em; }
.insight-desc { font-size: 0.72rem; color: var(--text-muted); line-height: 1.5; margin-top: 4px; }

/* â”€â”€ Empty state â”€â”€ */
.empty-state { display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 200px; gap: 10px; color: var(--text-muted); }

.chart-disclaimer { font-size: 0.68rem; color: #2d3748; margin-top: 8px; text-align: right; }
</style>
</head>
<body>
<div class="gradient-line"></div>
<div id="loading-bar"></div>

<nav>
  <div class="nav-inner">
    <a href="/index" class="nav-back">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M19 12H5M12 5l-7 7 7 7"/></svg>ëŒ€ì‹œë³´ë“œ
    </a>
    <span style="color:#1e293b">/</span>
    <a href="/landing" style="font-size:0.95rem;font-weight:900;text-decoration:none"><span class="text-gradient">CORRYU</span></a>
    <span style="font-size:0.82rem;color:var(--text-muted)">/ ìƒê´€ê´€ê³„</span>
    <div style="margin-left:auto;display:flex;align-items:center;gap:16px">
      <a href="/compare"     class="nav-link"><svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>ETF ë¹„êµ</a>
      <a href="/portfolio"   class="nav-link"><svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="7" width="20" height="14" rx="2"/><path d="M16 7V5a2 2 0 00-2-2h-4a2 2 0 00-2 2v2"/></svg>í¬íŠ¸í´ë¦¬ì˜¤</a>
    </div>
  </div>
</nav>

<div class="main-wrap">

  <!-- â”€â”€ í‹°ì»¤ ì„ íƒ â”€â”€ -->
  <div class="glass selector-card">
    <div class="page-header">
      <div class="page-title">ìƒê´€ê´€ê³„ <span class="text-gradient">ë¶„ì„ê¸°</span></div>
      <div class="page-sub">Portfolio Visualizer ìŠ¤íƒ€ì¼ Â· ìµœëŒ€ 10ê°œ</div>
    </div>

    <div class="selector-row" id="chip-row">
      <div class="add-wrap" id="add-wrap">
        <input type="text" class="add-input" id="add-input" placeholder="í‹°ì»¤ ì…ë ¥ (ì˜ˆ: GLD)" maxlength="10" autocomplete="off">
        <button class="add-btn" onclick="addTicker()">+ ì¶”ê°€</button>
      </div>
    </div>
    <div class="error-msg" id="error-msg"></div>

    <div class="preset-label">ğŸ“¦ ë¹ ë¥¸ ì¶”ê°€</div>
    <div style="display:flex;gap:6px;flex-wrap:wrap">
      <button class="preset-btn" onclick="loadPreset(['SPY','QQQ','GLD','TLT','IWM'])">ë¶„ì‚° í¬íŠ¸í´ë¦¬ì˜¤ (5ì¢…)</button>
      <button class="preset-btn" onclick="loadPreset(['XLK','XLF','XLV','XLE','XLI','XLU'])">ì„¹í„° ë¡œí…Œì´ì…˜ (6ì¢…)</button>
      <button class="preset-btn" onclick="loadPreset(['SPY','BND','GLD','VNQ','VWO'])">ê¸€ë¡œë²Œ ìì‚°ë°°ë¶„ (5ì¢…)</button>
      <button class="preset-btn" onclick="loadPreset(['QQQ','SQQQ'])">QQQ + ì¸ë²„ìŠ¤</button>
      <button class="preset-btn" onclick="clearAll()">âœ• ì´ˆê¸°í™”</button>
      <span style="width:1px;background:rgba(255,255,255,0.07);margin:0 2px;align-self:stretch;display:inline-block"></span>
      <button class="preset-btn" id="share-corr-btn" onclick="shareCorrURL()" title="í˜„ì¬ í‹°ì»¤ ëª©ë¡ì„ URLë¡œ ë³µì‚¬">ğŸ”— ë§í¬ ë³µì‚¬</button>
      <a class="preset-btn" id="backtest-link" href="/backtest" target="_blank" style="text-decoration:none">ğŸ“Š ë°±í…ŒìŠ¤íŠ¸ â†’</a>
    </div>
  </div>
<style>
#backtest-link{display:inline-flex;align-items:center}
#share-corr-btn.copied{background:rgba(74,222,128,0.15);border-color:rgba(74,222,128,0.35);color:#4ade80}
</style>

  <!-- â”€â”€ ë¶„ì„ ê²°ê³¼ â”€â”€ -->
  <div id="result-area" style="display:none">

    <!-- Stats + Heatmap -->
    <div class="analysis-grid">

      <!-- ìì‚° í†µê³„ -->
      <div class="glass card">
        <div class="card-title">ìì‚°ë³„ í†µê³„</div>
        <div id="stats-table-container">
          <div class="empty-state"><span>â€”</span></div>
        </div>
        <div class="chart-disclaimer" style="margin-top:10px">â€» CORRYU ì‚°ì¶œ ì§€í‘œ ê¸°ë°˜. ê¸°ëŒ€ìˆ˜ìµë¥ ì€ ê³¼ê±° CAGRì…ë‹ˆë‹¤.</div>
      </div>

      <!-- ìƒê´€ê´€ê³„ íˆíŠ¸ë§µ -->
      <div class="glass card">
        <div class="card-title">ìƒê´€ê³„ìˆ˜ ë§¤íŠ¸ë¦­ìŠ¤</div>
        <div class="heatmap-wrap" id="heatmap-container">
          <div class="empty-state"><span>â€”</span></div>
        </div>
        <div class="chart-disclaimer" style="margin-top:10px">â€» ì„¹í„° ì•µì»¤ ìƒê´€ê³„ìˆ˜ ë° íŒ©í„° ëª¨ë¸ ê¸°ë°˜ ì¶”ì •ê°’ì…ë‹ˆë‹¤.</div>
      </div>

    </div>

    <!-- ë¦¬ìŠ¤í¬-ìˆ˜ìµë¥  ì‚°ì ë„ -->
    <div class="glass card scatter-card">
      <div class="card-title">ë¦¬ìŠ¤í¬ â€” ìˆ˜ìµë¥  ì‚°ì ë„</div>
      <div class="scatter-container" id="scatter-container"></div>
      <div class="chart-disclaimer">â€» Xì¶•: ì—°í™˜ì‚° ë³€ë™ì„±(Vol), Yì¶•: CAGR. ì› í¬ê¸°: AUM ë¹„ë¡€.</div>
    </div>

    <!-- ì¸ì‚¬ì´íŠ¸ ì¹´ë“œ -->
    <div class="glass insight-card">
      <div class="card-title">ë¶„ì‚° íš¨ê³¼ ì¸ì‚¬ì´íŠ¸</div>
      <div class="insight-grid" id="insight-grid">
        <div class="empty-state"><span>â€”</span></div>
      </div>
    </div>

  </div><!-- /result-area -->

  <div id="empty-area" style="padding:60px;text-align:center;color:var(--text-muted)">
    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.2" opacity="0.2" style="margin:0 auto 12px"><circle cx="12" cy="12" r="9"/><path d="M9 9h.01M15 9h.01M9 15c.83 1 2.17 1.5 3 1.5s2.17-.5 3-1.5"/></svg>
    <div style="font-size:0.9rem">ETFë¥¼ 2ê°œ ì´ìƒ ì¶”ê°€í•˜ë©´ ë¶„ì„ì´ ì‹œì‘ë©ë‹ˆë‹¤</div>
    <div style="font-size:0.78rem;margin-top:6px">ìœ„ì˜ ë¹ ë¥¸ ì¶”ê°€ ë²„íŠ¼ì„ ëˆŒëŸ¬ë³´ì„¸ìš”</div>
  </div>

</div><!-- /main-wrap -->

<script>
// â”€â”€ ìƒ‰ìƒ íŒ”ë ˆíŠ¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const CHIP_COLORS = [
  { bg:'rgba(59,130,246,0.12)', border:'rgba(59,130,246,0.35)', text:'#60a5fa', dot:'#3b82f6' },
  { bg:'rgba(167,139,250,0.12)', border:'rgba(167,139,250,0.35)', text:'#a78bfa', dot:'#8b5cf6' },
  { bg:'rgba(245,158,11,0.12)', border:'rgba(245,158,11,0.35)', text:'#f59e0b', dot:'#d97706' },
  { bg:'rgba(74,222,128,0.12)', border:'rgba(74,222,128,0.35)', text:'#4ade80', dot:'#22c55e' },
  { bg:'rgba(248,113,113,0.12)', border:'rgba(248,113,113,0.35)', text:'#f87171', dot:'#ef4444' },
  { bg:'rgba(56,189,248,0.12)', border:'rgba(56,189,248,0.35)', text:'#38bdf8', dot:'#0ea5e9' },
  { bg:'rgba(251,146,60,0.12)', border:'rgba(251,146,60,0.35)', text:'#fb923c', dot:'#f97316' },
  { bg:'rgba(192,132,252,0.12)', border:'rgba(192,132,252,0.35)', text:'#c084fc', dot:'#a855f7' },
  { bg:'rgba(34,211,238,0.12)', border:'rgba(34,211,238,0.35)', text:'#22d3ee', dot:'#06b6d4' },
  { bg:'rgba(163,230,53,0.12)', border:'rgba(163,230,53,0.35)', text:'#a3e635', dot:'#84cc16' },
];

// â”€â”€ ë°ì´í„° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let allData = {};
let selected = []; // ordered list of etf objects (with _sid injected)

// â”€â”€ ì„¹í„° ê·¸ë£¹ ìƒê´€ê³„ìˆ˜ í…Œì´ë¸” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// 24ê°œ ì„¹í„°ë¥¼ ì¹´í…Œê³ ë¦¬ë¡œ ë¬¶ì–´ base ìƒê´€ê´€ê³„ ì •ì˜
function getSectorGroup(sid) {
  const G = {
    eq_broad:   ['S01','S05','S06','S07','S08','S10'],
    eq_tech:    ['S02','S09'],
    eq_health:  ['S03'],
    eq_finance: ['S04'],
    eq_intl:    ['S11','S12'],
    eq_small:   ['S13'],
    eq_energy:  ['S19'],
    eq_re:      ['S20'],
    bond_safe:  ['S14','S15','S17'],
    bond_hy:    ['S16'],
    gold:       ['S18'],
    crypto:     ['S21'],
    inverse:    ['S22'],
  };
  for (const [grp, sids] of Object.entries(G)) {
    if (sids.includes(sid)) return grp;
  }
  return 'other';
}

const GC = { // group-group base correlations
  eq_broad:   { eq_broad:0.88, eq_tech:0.82, eq_health:0.73, eq_finance:0.80, eq_intl:0.72, eq_small:0.82, eq_energy:0.64, eq_re:0.65, bond_safe:-0.10, bond_hy:0.52, gold:0.05, crypto:0.17, inverse:-0.88, other:0.45 },
  eq_tech:    { eq_broad:0.82, eq_tech:0.93, eq_health:0.64, eq_finance:0.71, eq_intl:0.64, eq_small:0.75, eq_energy:0.52, eq_re:0.57, bond_safe:-0.12, bond_hy:0.47, gold:0.02, crypto:0.22, inverse:-0.92, other:0.40 },
  eq_health:  { eq_broad:0.73, eq_tech:0.64, eq_health:0.91, eq_finance:0.68, eq_intl:0.60, eq_small:0.68, eq_energy:0.50, eq_re:0.58, bond_safe:0.12,  bond_hy:0.44, gold:0.10, crypto:0.12, inverse:-0.70, other:0.38 },
  eq_finance: { eq_broad:0.80, eq_tech:0.71, eq_health:0.68, eq_finance:0.92, eq_intl:0.70, eq_small:0.78, eq_energy:0.65, eq_re:0.62, bond_safe:-0.08, bond_hy:0.56, gold:0.04, crypto:0.15, inverse:-0.82, other:0.42 },
  eq_intl:    { eq_broad:0.72, eq_tech:0.64, eq_health:0.60, eq_finance:0.70, eq_intl:0.90, eq_small:0.70, eq_energy:0.60, eq_re:0.60, bond_safe:-0.08, bond_hy:0.50, gold:0.08, crypto:0.15, inverse:-0.72, other:0.40 },
  eq_small:   { eq_broad:0.82, eq_tech:0.75, eq_health:0.68, eq_finance:0.78, eq_intl:0.70, eq_small:0.92, eq_energy:0.62, eq_re:0.64, bond_safe:-0.10, bond_hy:0.54, gold:0.05, crypto:0.18, inverse:-0.85, other:0.42 },
  eq_energy:  { eq_broad:0.64, eq_tech:0.52, eq_health:0.50, eq_finance:0.65, eq_intl:0.60, eq_small:0.62, eq_energy:0.93, eq_re:0.55, bond_safe:-0.05, bond_hy:0.48, gold:0.18, crypto:0.14, inverse:-0.65, other:0.38 },
  eq_re:      { eq_broad:0.65, eq_tech:0.57, eq_health:0.58, eq_finance:0.62, eq_intl:0.60, eq_small:0.64, eq_energy:0.55, eq_re:0.92, bond_safe:0.15,  bond_hy:0.52, gold:0.12, crypto:0.12, inverse:-0.65, other:0.40 },
  bond_safe:  { eq_broad:-0.10, eq_tech:-0.12, eq_health:0.12, eq_finance:-0.08, eq_intl:-0.08, eq_small:-0.10, eq_energy:-0.05, eq_re:0.15, bond_safe:0.88, bond_hy:0.30, gold:0.20, crypto:-0.05, inverse:0.12, other:0.10 },
  bond_hy:    { eq_broad:0.52, eq_tech:0.47, eq_health:0.44, eq_finance:0.56, eq_intl:0.50, eq_small:0.54, eq_energy:0.48, eq_re:0.52, bond_safe:0.30, bond_hy:0.93, gold:0.08, crypto:0.20, inverse:-0.55, other:0.30 },
  gold:       { eq_broad:0.05, eq_tech:0.02, eq_health:0.10, eq_finance:0.04, eq_intl:0.08, eq_small:0.05, eq_energy:0.18, eq_re:0.12, bond_safe:0.20, bond_hy:0.08, gold:1.00, crypto:0.25, inverse:-0.05, other:0.12 },
  crypto:     { eq_broad:0.17, eq_tech:0.22, eq_health:0.12, eq_finance:0.15, eq_intl:0.15, eq_small:0.18, eq_energy:0.14, eq_re:0.12, bond_safe:-0.05, bond_hy:0.20, gold:0.25, crypto:1.00, inverse:-0.22, other:0.15 },
  inverse:    { eq_broad:-0.88, eq_tech:-0.92, eq_health:-0.70, eq_finance:-0.82, eq_intl:-0.72, eq_small:-0.85, eq_energy:-0.65, eq_re:-0.65, bond_safe:0.12, bond_hy:-0.55, gold:-0.05, crypto:-0.22, inverse:1.00, other:-0.50 },
  other:      { eq_broad:0.45, eq_tech:0.40, eq_health:0.38, eq_finance:0.42, eq_intl:0.40, eq_small:0.42, eq_energy:0.38, eq_re:0.40, bond_safe:0.10, bond_hy:0.30, gold:0.12, crypto:0.15, inverse:-0.50, other:0.80 },
};

function seededRand(seed) {
  let s = Math.abs(seed) % 2147483647 || 1;
  return () => { s = s * 16807 % 2147483647; return (s-1)/2147483646; };
}
function hashPair(t1, t2) {
  const a = t1 < t2 ? t1 : t2, b = t1 < t2 ? t2 : t1;
  return [...(a+'Â·'+b)].reduce((acc,c,i) => acc + c.charCodeAt(0)*(i*17+3), 42);
}

function getCorrelation(A, B) {
  if (A.ticker === B.ticker) return 1.0;
  const gA = getSectorGroup(A._sid || 'other');
  const gB = getSectorGroup(B._sid || 'other');
  let base = (GC[gA]?.[gB]) ?? (GC[gB]?.[gA]) ?? 0.35;

  // ê°™ì€ ì„¹í„°ë¼ë©´ r_anchorë¡œ ìŠ¤ì¼€ì¼
  if (A._sid && A._sid === B._sid) {
    const rA = Math.abs(A.r_anchor ?? 0.85);
    const rB = Math.abs(B.r_anchor ?? 0.85);
    base = base * Math.sqrt(rA * rB);
  }

  // ì‹œë“œ ê¸°ë°˜ ë…¸ì´ì¦ˆ Â±0.07
  const rand = seededRand(hashPair(A.ticker, B.ticker));
  const noise = (rand() + rand() - 1) * 0.07;

  return Math.max(-0.99, Math.min(0.99, base + noise));
}

// â”€â”€ íˆíŠ¸ë§µ ìƒ‰ìƒ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function corrBg(r) {
  if (r >= 0.99) return 'rgba(74,222,128,0.15)';
  if (r >= 0)    return `rgba(74,222,128,${(r*0.55+0.04).toFixed(2)})`;
  else           return `rgba(239,68,68,${((-r)*0.55+0.04).toFixed(2)})`;
}
function corrTextColor(r) {
  if (r >= 0.7)  return '#4ade80';
  if (r >= 0.3)  return '#86efac';
  if (r >= 0.1)  return '#94a3b8';
  if (r >= -0.1) return '#64748b';
  if (r >= -0.4) return '#fca5a5';
  return '#f87171';
}

// â”€â”€ í¬ë§· í—¬í¼ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function fmtPct(v, d=1) { if(v==null) return 'â€”'; return (v>0?'+':'')+v.toFixed(d)+'%'; }
function fmtNum(v, d=2)  { if(v==null) return 'â€”'; return v.toFixed(d); }
function fmtAUM(v)       { if(!v) return 'â€”'; const m=v/1e6; return m>=1000?'$'+(m/1000).toFixed(1)+'B':'$'+Math.round(m)+'M'; }
function cagrColor(v)    { return v==null?'ret-na':v>=0?'ret-pos':'ret-neg'; }

// â”€â”€ ì„ íƒ ê´€ë¦¬ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderChips() {
  const row = document.getElementById('chip-row');
  row.querySelectorAll('.ticker-chip').forEach(el => el.remove());
  const addWrap = document.getElementById('add-wrap');
  selected.forEach((etf, i) => {
    const c = CHIP_COLORS[i % CHIP_COLORS.length];
    const chip = document.createElement('div');
    chip.className = 'ticker-chip';
    chip.style.cssText = `background:${c.bg};border-color:${c.border};color:${c.text}`;
    chip.innerHTML = `<span>${etf.ticker}</span><button class="chip-close" style="color:${c.text}" onclick="removeTicker('${etf.ticker}')">âœ•</button>`;
    row.insertBefore(chip, addWrap);
  });
  addWrap.style.display = selected.length >= 10 ? 'none' : 'flex';
}

function showError(msg) {
  const el = document.getElementById('error-msg');
  el.textContent = msg;
  setTimeout(() => el.textContent = '', 3000);
}

function addTicker(ticker) {
  const input = document.getElementById('add-input');
  const t = (ticker || input.value.trim()).toUpperCase();
  if (!t) return;
  if (!ticker) input.value = '';
  if (selected.length >= 10) { showError('ìµœëŒ€ 10ê°œê¹Œì§€ ì¶”ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.'); return; }
  if (selected.some(e => e.ticker === t)) { showError(`${t}ëŠ” ì´ë¯¸ ì¶”ê°€ë˜ì–´ ìˆìŠµë‹ˆë‹¤.`); return; }
  const found = allData[t];
  if (!found) { showError(`"${t}"ë¥¼ CORRYU ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`); return; }
  selected.push(found);
  renderChips();
  renderAll();
}

function removeTicker(ticker) {
  selected = selected.filter(e => e.ticker !== ticker);
  renderChips();
  renderAll();
}

function loadPreset(tickers) {
  clearAll(true);
  tickers.forEach(t => addTicker(t));
}

function clearAll(silent) {
  selected = [];
  renderChips();
  if (!silent) renderAll();
}

// â”€â”€ ì „ì²´ ë Œë” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderAll() {
  const resultArea = document.getElementById('result-area');
  const emptyArea  = document.getElementById('empty-area');
  if (selected.length < 2) {
    resultArea.style.display = 'none';
    emptyArea.style.display  = 'block';
    return;
  }
  resultArea.style.display = 'block';
  emptyArea.style.display  = 'none';
  renderStats();
  renderHeatmap();
  renderScatter();
  renderInsights();
  updateBacktestLink();
}

// â”€â”€ ìì‚° í†µê³„ í…Œì´ë¸” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderStats() {
  const rows = selected.map((etf, i) => {
    const c = CHIP_COLORS[i % CHIP_COLORS.length];
    const zVal = etf.short_history ? 'â€”' : fmtNum(etf.z_score, 2);
    const zColor = etf.z_score > 1.5 ? '#f87171' : etf.z_score < -1.5 ? '#60a5fa' : '#94a3b8';
    return `<tr>
      <td>
        <div class="ticker-cell">
          <span class="ticker-dot" style="background:${c.dot}"></span>
          <a href="/etf-detail?ticker=${etf.ticker}" style="color:${c.text};text-decoration:none;font-size:0.86rem;font-weight:800">${etf.ticker}</a>
        </div>
      </td>
      <td class="${cagrColor(etf.cagr)}">${fmtPct(etf.cagr)}</td>
      <td style="color:#f59e0b">${fmtPct(etf.vol)}</td>
      <td style="color:${etf.sortino>=1.2?'#4ade80':etf.sortino<0?'#f87171':'#94a3b8'}">${fmtNum(etf.sortino,2)}</td>
      <td style="color:${zColor}">${zVal}</td>
      <td style="color:#64748b;font-size:0.76rem">${fmtAUM(etf.aum)}</td>
    </tr>`;
  }).join('');

  document.getElementById('stats-table-container').innerHTML = `
    <table class="stats-table">
      <thead><tr>
        <th>ETF</th>
        <th>CAGR</th>
        <th>ë³€ë™ì„±</th>
        <th>Sortino</th>
        <th>Z-Score</th>
        <th>AUM</th>
      </tr></thead>
      <tbody>${rows}</tbody>
    </table>`;
}

// â”€â”€ ìƒê´€ê³„ìˆ˜ íˆíŠ¸ë§µ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderHeatmap() {
  const N = selected.length;
  // ìƒê´€ê³„ìˆ˜ ë¯¸ë¦¬ ê³„ì‚° (symmetric)
  const matrix = Array.from({length:N}, () => new Array(N).fill(0));
  for (let i=0; i<N; i++) {
    for (let j=0; j<N; j++) {
      matrix[i][j] = i===j ? 1.0 : (i<j ? getCorrelation(selected[i], selected[j]) : matrix[j][i]);
    }
  }

  const headerRow = '<tr><th></th>' + selected.map((e,i) => {
    const c = CHIP_COLORS[i%CHIP_COLORS.length];
    return `<th style="color:${c.text}">${e.ticker}</th>`;
  }).join('') + '</tr>';

  const dataRows = selected.map((rowEtf, i) => {
    const c = CHIP_COLORS[i%CHIP_COLORS.length];
    const cells = selected.map((_, j) => {
      const r = matrix[i][j];
      const isDiag = i === j;
      const bg = corrBg(r);
      const textColor = isDiag ? '#1e293b' : corrTextColor(r);
      const displayVal = isDiag ? '1' : (r >= 0 ? '+' : '') + r.toFixed(2);
      return `<td><div class="heat-cell" style="background:${bg}"><span class="heat-val" style="color:${textColor}">${displayVal}</span>${isDiag?`<span class="heat-diag" style="color:${c.text}">${rowEtf.ticker}</span>`:''}</div></td>`;
    }).join('');
    return `<tr><th style="color:${c.text};font-size:0.78rem">${rowEtf.ticker}</th>${cells}</tr>`;
  }).join('');

  document.getElementById('heatmap-container').innerHTML = `
    <table class="heatmap-table">${headerRow}${dataRows}</table>`;
}

// â”€â”€ ë¦¬ìŠ¤í¬-ìˆ˜ìµë¥  ì‚°ì ë„ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderScatter() {
  const W=700, H=300;
  const P={t:30, r:30, b:45, l:55};
  const cw=W-P.l-P.r, ch=H-P.t-P.b;

  const vols  = selected.map(e => e.vol  || 15);
  const cagrs = selected.map(e => e.cagr || 0);
  const aums  = selected.map(e => e.aum  || 1e9);

  const minVol  = Math.max(0,  Math.min(...vols)  * 0.80 - 2);
  const maxVol  = Math.max(...vols)  * 1.15 + 2;
  const minCagr = Math.min(-5, Math.min(...cagrs) * 1.20 - 3);
  const maxCagr = Math.max(5,  Math.max(...cagrs) * 1.15 + 3);
  const maxAUM  = Math.max(...aums);

  const toX = v => P.l + ((v - minVol) / (maxVol - minVol)) * cw;
  const toY = v => P.t + ch - ((v - minCagr) / (maxCagr - minCagr)) * ch;

  // ê·¸ë¦¬ë“œ
  const gridVols  = [];
  const step = (maxVol - minVol) / 4;
  for (let v = Math.ceil(minVol/5)*5; v <= maxVol; v += 5) gridVols.push(v);
  const gridCagrs = [];
  for (let v = Math.ceil(minCagr/10)*10; v <= maxCagr; v += 10) gridCagrs.push(v);

  const gridLines = [
    ...gridVols.map(v => `<line x1="${toX(v).toFixed(1)}" y1="${P.t}" x2="${toX(v).toFixed(1)}" y2="${P.t+ch}" stroke="rgba(255,255,255,0.04)" stroke-width="1"/>
      <text x="${toX(v).toFixed(1)}" y="${H-6}" text-anchor="middle" font-size="10" fill="rgba(100,116,139,0.7)" font-family="monospace">${v}%</text>`),
    ...gridCagrs.map(v => `<line x1="${P.l}" y1="${toY(v).toFixed(1)}" x2="${P.l+cw}" y2="${toY(v).toFixed(1)}" stroke="rgba(255,255,255,0.04)" stroke-width="1"/>
      <text x="${P.l-6}" y="${(toY(v)+3.5).toFixed(1)}" text-anchor="end" font-size="10" fill="rgba(100,116,139,0.7)" font-family="monospace">${v>0?'+':''}${v}%</text>`),
  ].join('');

  // 0% CAGR ê¸°ì¤€ì„ 
  const y0 = toY(0).toFixed(1);
  const refLine = `<line x1="${P.l}" y1="${y0}" x2="${P.l+cw}" y2="${y0}" stroke="rgba(255,255,255,0.10)" stroke-width="1" stroke-dasharray="4,4"/>
    <text x="${P.l+3}" y="${(+y0-4).toFixed(1)}" font-size="9" fill="rgba(100,116,139,0.5)">0% ìˆ˜ìµ</text>`;

  // ì¶• ë ˆì´ë¸”
  const axisLabels = `
    <text x="${P.l + cw/2}" y="${H-0}" text-anchor="middle" font-size="11" fill="rgba(100,116,139,0.6)" font-family="Inter,sans-serif">ë³€ë™ì„± (Volatility)</text>
    <text x="12" y="${P.t + ch/2}" text-anchor="middle" font-size="11" fill="rgba(100,116,139,0.6)" font-family="Inter,sans-serif" transform="rotate(-90,12,${P.t+ch/2})">ì—°ìˆ˜ìµë¥  (CAGR)</text>`;

  // ì› + ë ˆì´ë¸”
  const circles = selected.map((etf, i) => {
    const c = CHIP_COLORS[i%CHIP_COLORS.length];
    const r = Math.max(8, Math.min(22, 8 + 14 * Math.sqrt(etf.aum / maxAUM)));
    const cx = toX(etf.vol || 15).toFixed(1);
    const cy = toY(etf.cagr || 0).toFixed(1);
    const labelY = (parseFloat(cy) - r - 5).toFixed(1);
    return `<circle cx="${cx}" cy="${cy}" r="${r.toFixed(1)}" fill="${c.dot}" fill-opacity="0.25" stroke="${c.dot}" stroke-width="1.5"/>
      <text x="${cx}" y="${labelY}" text-anchor="middle" font-size="11" font-weight="800" fill="${c.text}" font-family="Inter,sans-serif">${etf.ticker}</text>`;
  }).join('');

  document.getElementById('scatter-container').innerHTML = `
    <svg viewBox="0 0 ${W} ${H}" width="100%" height="100%" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg">
      ${gridLines}${refLine}${axisLabels}${circles}
    </svg>`;
}

// â”€â”€ ë¶„ì‚° íš¨ê³¼ ì¸ì‚¬ì´íŠ¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderInsights() {
  const N = selected.length;
  if (N < 2) { document.getElementById('insight-grid').innerHTML = '<div class="empty-state"><span>â€”</span></div>'; return; }

  // ëª¨ë“  ìŒ ìƒê´€ê³„ìˆ˜ ê³„ì‚°
  const pairs = [];
  for (let i=0; i<N; i++) {
    for (let j=i+1; j<N; j++) {
      pairs.push({ a: selected[i], b: selected[j], r: getCorrelation(selected[i], selected[j]) });
    }
  }
  pairs.sort((x,y) => x.r - y.r);

  const lowest  = pairs[0];
  const highest = pairs[pairs.length-1];
  const avgCorr = pairs.reduce((s,p) => s+p.r, 0) / pairs.length;

  // ìµœê³  Sortino ETF
  const bestSortino = [...selected].sort((a,b) => (b.sortino||0)-(a.sortino||0))[0];
  // ìµœì € ë³€ë™ì„± ETF
  const lowestVol   = [...selected].sort((a,b) => (a.vol||99)-(b.vol||99))[0];

  const diversLabel = avgCorr < 0.4 ? 'ìš°ìˆ˜' : avgCorr < 0.65 ? 'ë³´í†µ' : 'ë‚®ìŒ';
  const diversColor = avgCorr < 0.4 ? '#4ade80' : avgCorr < 0.65 ? '#f59e0b' : '#f87171';

  const items = [
    {
      badge: 'ğŸ”— ìµœì € ìƒê´€',
      badgeBg: 'rgba(74,222,128,0.15)', badgeColor: '#4ade80',
      pair: `${lowest.a.ticker} Â· ${lowest.b.ticker}`,
      val: (lowest.r >= 0 ? '+' : '') + lowest.r.toFixed(2),
      valColor: corrTextColor(lowest.r),
      desc: lowest.r < 0.2 ? 'ë‚®ì€ ìƒê´€ê´€ê³„ë¡œ ë¦¬ìŠ¤í¬ ë¶„ì‚° íš¨ê³¼ê°€ í½ë‹ˆë‹¤. í•¨ê»˜ ë³´ìœ í•˜ë©´ í¬íŠ¸í´ë¦¬ì˜¤ ë³€ë™ì„±ì„ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.'
                            : 'ë‹¤ì†Œ ë…ë¦½ì ì…ë‹ˆë‹¤. ë¶„ì‚° íš¨ê³¼ê°€ ì¼ë¶€ ê¸°ëŒ€ë©ë‹ˆë‹¤.',
    },
    {
      badge: 'â›“ ìµœê³  ìƒê´€',
      badgeBg: 'rgba(248,113,113,0.12)', badgeColor: '#f87171',
      pair: `${highest.a.ticker} Â· ${highest.b.ticker}`,
      val: (highest.r >= 0 ? '+' : '') + highest.r.toFixed(2),
      valColor: corrTextColor(highest.r),
      desc: highest.r > 0.8 ? 'ê°•í•œ ìƒê´€ê´€ê³„ì…ë‹ˆë‹¤. ë‘ ì¢…ëª©ì„ í•¨ê»˜ ë³´ìœ í•˜ë©´ ì¤‘ë³µ ìµìŠ¤í¬ì €ê°€ ë†’ì•„ ë¶„ì‚° íš¨ê³¼ê°€ ì œí•œì ì…ë‹ˆë‹¤.'
                             : 'ì ë‹¹í•œ ìƒê´€ê´€ê³„ì…ë‹ˆë‹¤.',
    },
    {
      badge: 'ğŸ“Š ë¶„ì‚° íš¨ê³¼',
      badgeBg: `rgba(${avgCorr<0.4?'74,222,128':avgCorr<0.65?'245,158,11':'239,68,68'},0.12)`, badgeColor: diversColor,
      pair: `í‰ê·  ìƒê´€ê³„ìˆ˜ ${(avgCorr>=0?'+':'')+avgCorr.toFixed(2)}`,
      val: diversLabel,
      valColor: diversColor,
      desc: avgCorr < 0.4 ? `í¬íŠ¸í´ë¦¬ì˜¤ ì „ì²´ì˜ ë¶„ì‚° íš¨ê³¼ê°€ ìš°ìˆ˜í•©ë‹ˆë‹¤. ${pairs.length}ê°œ ì¡°í•© í‰ê·  r=${avgCorr.toFixed(2)}.`
          : avgCorr < 0.65 ? `ë³´í†µ ìˆ˜ì¤€ì˜ ë¶„ì‚°í™”ì…ë‹ˆë‹¤. ë¹„ìƒê´€ ìì‚°(ì±„ê¶ŒÂ·ê¸ˆ ë“±) ì¶”ê°€ë¥¼ ê³ ë ¤í•´ë³´ì„¸ìš”.`
          : `ìƒê´€ê´€ê³„ê°€ ë†’ì•„ ë¶„ì‚° íš¨ê³¼ê°€ ë‚®ìŠµë‹ˆë‹¤. ì±„ê¶Œ(BND/TLT), ê¸ˆ(GLD) ë“± ì¶”ê°€ë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤.`,
    },
  ];

  document.getElementById('insight-grid').innerHTML = items.map(it => `
    <div class="insight-item">
      <div class="insight-badge" style="background:${it.badgeBg};color:${it.badgeColor}">${it.badge}</div>
      <div class="insight-pair">${it.pair}</div>
      <div class="insight-val" style="color:${it.valColor}">${it.val}</div>
      <div class="insight-desc">${it.desc}</div>
    </div>`).join('');
}

// â”€â”€ ì…ë ¥ ì´ë²¤íŠ¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.getElementById('add-input').addEventListener('keydown', e => {
  if (e.key === 'Enter') addTicker();
});

// â”€â”€ ê³µìœ  ê¸°ëŠ¥ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function shareCorrURL() {
  if (selected.length === 0) { showError('ë¨¼ì € ETFë¥¼ ì¶”ê°€í•˜ì„¸ìš”.'); return; }
  const tickers = selected.map(e => e.ticker).join(',');
  const url = `${location.origin}/correlation?tickers=${encodeURIComponent(tickers)}`;
  navigator.clipboard.writeText(url).then(() => {
    const btn = document.getElementById('share-corr-btn');
    btn.classList.add('copied'); btn.textContent = 'âœ“ ë³µì‚¬ë¨!';
    setTimeout(() => { btn.classList.remove('copied'); btn.textContent = 'ğŸ”— ë§í¬ ë³µì‚¬'; }, 2500);
  });
}

// ë°±í…ŒìŠ¤íŠ¸ ë§í¬ â€” í˜„ì¬ ì„ íƒ í‹°ì»¤ë¥¼ ê· ë“± ë°°ë¶„ìœ¼ë¡œ ì „ë‹¬
function updateBacktestLink() {
  if (selected.length === 0) return;
  const w = (100 / selected.length).toFixed(1);
  const portfolio = selected.map(e => `${e.ticker}:${w}`).join(',');
  document.getElementById('backtest-link').href = `/backtest?portfolio=${encodeURIComponent(portfolio)}`;
}

// â”€â”€ ë°ì´í„° ë¡œë“œ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const lb = document.getElementById('loading-bar');
lb.style.width = '40%';
fetch('/etf_data.json')
  .then(r => r.json())
  .then(data => {
    for (const [sid, etfs] of Object.entries(data)) {
      for (const etf of etfs) allData[etf.ticker] = { ...etf, _sid: sid };
    }
    lb.style.width = '100%';
    setTimeout(() => { lb.style.width = '0'; lb.style.transition = 'none'; }, 400);

    // URL íŒŒë¼ë¯¸í„°ë¡œ ì´ˆê¸° ë¡œë“œ
    const initTickers = (new URLSearchParams(location.search).get('tickers') || '')
      .split(',').map(t => t.trim().toUpperCase()).filter(Boolean).slice(0, 10);
    if (initTickers.length >= 2) {
      initTickers.forEach(t => { if (allData[t]) { selected.push(allData[t]); } });
      renderChips();
      renderAll();
    }

    I18n.init();
  })
  .catch(() => showError('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨. ìƒˆë¡œê³ ì¹¨ í•´ì£¼ì„¸ìš”.'));
</script>
</body>
</html>
