<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ë¡œê·¸ì¸ â€” CORRYU</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
<script src="/supabase-client.js"></script>
<script src="/i18n.js"></script>
<style>
:root {
  --bg-primary: #0a0d14;
  --bg-card: rgba(18,22,36,0.95);
  --border: rgba(255,255,255,0.08);
  --text-primary: #e2e8f0;
  --text-muted: #64748b;
  --accent: #3b82f6;
  --accent-glow: rgba(59,130,246,0.3);
}
* { box-sizing: border-box; margin: 0; padding: 0; }
body {
  background: var(--bg-primary);
  color: var(--text-primary);
  font-family: 'Inter', -apple-system, sans-serif;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  -webkit-font-smoothing: antialiased;
}

/* â”€â”€ ë°°ê²½ ê¸€ë¡œìš° â”€â”€ */
.bg-glow {
  position: fixed; top: 0; left: 0; right: 0; bottom: 0;
  pointer-events: none; z-index: 0;
  background:
    radial-gradient(ellipse 600px 400px at 20% 30%, rgba(59,130,246,0.05) 0%, transparent 70%),
    radial-gradient(ellipse 400px 300px at 80% 70%, rgba(139,92,246,0.04) 0%, transparent 70%);
}
.gradient-line {
  position: fixed; top: 0; left: 0; right: 0; height: 3px; z-index: 200;
  background: linear-gradient(90deg, #3b82f6, #8b5cf6, #ec4899, #f59e0b);
}

/* â”€â”€ ë ˆì´ì•„ì›ƒ â”€â”€ */
.page-wrap {
  flex: 1; display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  padding: 80px 24px 40px; position: relative; z-index: 1;
}

/* â”€â”€ ë¡œê·¸ì¸ ì¹´ë“œ â”€â”€ */
.login-card {
  width: 100%; max-width: 420px;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 20px;
  padding: 44px 40px 40px;
  position: relative; overflow: hidden;
  box-shadow: 0 24px 80px rgba(0,0,0,0.4);
}
.login-card::before {
  content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px;
  background: linear-gradient(90deg, #3b82f6, #8b5cf6, #ec4899);
}

/* â”€â”€ ë¡œê³  & íƒ€ì´í‹€ â”€â”€ */
.text-gradient {
  background: linear-gradient(135deg, #60a5fa, #a78bfa);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  background-clip: text;
}
.card-logo { font-size: 1.4rem; font-weight: 900; text-align: center; margin-bottom: 6px; }
.card-title { text-align: center; font-size: 0.9rem; color: var(--text-muted); margin-bottom: 32px; }

/* â”€â”€ ì†Œì…œ ë²„íŠ¼ â”€â”€ */
.social-btn {
  display: flex; align-items: center; gap: 12px;
  width: 100%; padding: 12px 18px; border-radius: 10px;
  border: 1px solid var(--border); background: rgba(255,255,255,0.04);
  color: var(--text-primary); font-size: 0.875rem; font-weight: 600;
  cursor: pointer; text-decoration: none; transition: all 0.15s;
  font-family: inherit; margin-bottom: 10px; text-align: left;
}
.social-btn:hover { background: rgba(255,255,255,0.08); border-color: rgba(255,255,255,0.18); transform: translateY(-1px); }
.social-btn:last-of-type { margin-bottom: 0; }

.social-icon {
  width: 22px; height: 22px; flex-shrink: 0;
  display: flex; align-items: center; justify-content: center;
}
.social-label { flex: 1; }

/* ì¹´ì¹´ì˜¤ */
.btn-kakao {
  background: #FEE500; border-color: #FEE500; color: #191600;
}
.btn-kakao:hover { background: #f5dc00; border-color: #f5dc00; }

/* ë„¤ì´ë²„ */
.btn-naver {
  background: #03C75A; border-color: #03C75A; color: #fff;
}
.btn-naver:hover { background: #02b350; border-color: #02b350; }

/* êµ¬ê¸€ */
.btn-google { background: rgba(255,255,255,0.06); }

/* â”€â”€ êµ¬ë¶„ì„  â”€â”€ */
.divider {
  display: flex; align-items: center; gap: 14px;
  margin: 22px 0; color: var(--text-muted); font-size: 0.75rem;
}
.divider::before, .divider::after {
  content: ''; flex: 1; height: 1px; background: var(--border);
}

/* â”€â”€ ì´ë©”ì¼ í¼ â”€â”€ */
.form-group { margin-bottom: 14px; }
.form-label {
  display: block; font-size: 0.8rem; font-weight: 600;
  color: #94a3b8; margin-bottom: 6px;
}
.form-input {
  width: 100%; padding: 11px 14px; border-radius: 9px;
  background: rgba(255,255,255,0.04); border: 1px solid var(--border);
  color: var(--text-primary); font-size: 0.875rem; font-family: inherit;
  outline: none; transition: border-color 0.15s, background 0.15s;
}
.form-input:focus {
  border-color: rgba(59,130,246,0.5);
  background: rgba(59,130,246,0.04);
}
.form-input::placeholder { color: #374151; }

.forgot-link {
  display: block; text-align: right; font-size: 0.75rem;
  color: var(--text-muted); text-decoration: none; margin-top: -8px; margin-bottom: 20px;
  transition: color 0.15s;
}
.forgot-link:hover { color: #60a5fa; }

/* â”€â”€ ì œì¶œ ë²„íŠ¼ â”€â”€ */
.btn-submit {
  width: 100%; padding: 13px; border-radius: 10px;
  background: var(--accent); border: none; color: white;
  font-size: 0.9rem; font-weight: 700; font-family: inherit;
  cursor: pointer; transition: all 0.15s;
  box-shadow: 0 0 20px rgba(59,130,246,0.25);
}
.btn-submit:hover { background: #2563eb; transform: translateY(-1px); box-shadow: 0 0 32px rgba(59,130,246,0.4); }
.btn-submit:active { transform: translateY(0); }

/* â”€â”€ í•˜ë‹¨ ë§í¬ â”€â”€ */
.card-footer-links {
  display: flex; justify-content: center; gap: 20px;
  margin-top: 24px; font-size: 0.8rem;
}
.card-footer-links a { color: var(--text-muted); text-decoration: none; transition: color 0.15s; }
.card-footer-links a:hover { color: #60a5fa; }

/* â”€â”€ íƒ­ ì „í™˜ (ë¡œê·¸ì¸ / íšŒì›ê°€ì…) â”€â”€ */
.tab-bar {
  display: flex; gap: 0; margin-bottom: 28px;
  border: 1px solid var(--border); border-radius: 10px; overflow: hidden;
}
.tab-btn {
  flex: 1; padding: 10px; background: transparent; border: none;
  color: var(--text-muted); font-size: 0.85rem; font-weight: 600;
  cursor: pointer; font-family: inherit; transition: all 0.15s;
}
.tab-btn.active { background: rgba(59,130,246,0.15); color: #60a5fa; }
.tab-btn:hover:not(.active) { color: var(--text-primary); background: rgba(255,255,255,0.04); }

/* â”€â”€ ë²•ì  ê³ ì§€ â”€â”€ */
.legal-text {
  text-align: center; font-size: 0.72rem; color: var(--text-muted);
  margin-top: 20px; line-height: 1.6;
}
.legal-text a { color: var(--text-muted); text-decoration: underline; }

/* â”€â”€ Toast ì•Œë¦¼ â”€â”€ */
.toast {
  position: fixed; bottom: 28px; left: 50%; transform: translateX(-50%) translateY(8px);
  background: rgba(30,36,52,0.97); border: 1px solid rgba(255,255,255,0.1);
  color: var(--text-primary); padding: 12px 20px; border-radius: 10px;
  font-size: 0.82rem; font-weight: 500; white-space: nowrap;
  opacity: 0; transition: all 0.25s; pointer-events: none; z-index: 1000;
  box-shadow: 0 8px 32px rgba(0,0,0,0.4);
}
.toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }

/* â”€â”€ ë’¤ë¡œ ê°€ê¸° â”€â”€ */
.back-link {
  position: fixed; top: 20px; left: 24px; z-index: 100;
  display: flex; align-items: center; gap: 6px;
  color: var(--text-muted); font-size: 0.82rem; text-decoration: none;
  transition: color 0.15s;
}
.back-link:hover { color: var(--text-primary); }

@media (max-width: 480px) {
  .login-card { padding: 36px 24px 32px; }
}
</style>
</head>
<body>

<div class="gradient-line"></div>
<div class="bg-glow"></div>

<!-- ë’¤ë¡œê°€ê¸° -->
<a href="/landing" class="back-link">
  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M19 12H5M12 5l-7 7 7 7"/></svg>
  í™ˆìœ¼ë¡œ
</a>

<!-- ì–¸ì–´ ìŠ¤ìœ„ì²˜ -->
<button id="lang-switcher"
  onclick="I18n.setLocale(I18n.locale()==='ko'?'en':'ko')"
  style="position:fixed;top:16px;right:20px;z-index:100;
         padding:5px 12px;border-radius:7px;
         background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);
         color:#94a3b8;font-size:0.78rem;font-weight:700;cursor:pointer;
         font-family:inherit;transition:all 0.15s;"
  onmouseover="this.style.background='rgba(255,255,255,0.1)'"
  onmouseout="this.style.background='rgba(255,255,255,0.05)'">EN</button>

<!-- â”€â”€ ë¡œê·¸ì¸ ì¹´ë“œ â”€â”€ -->
<div class="page-wrap">
  <div class="login-card">

    <!-- ë¡œê³  -->
    <div class="card-logo"><span class="text-gradient">CORRYU</span></div>
    <div class="card-title">ê³„ì†í•˜ë ¤ë©´ ë¡œê·¸ì¸í•˜ì„¸ìš”</div>

    <!-- íƒ­: ë¡œê·¸ì¸ / íšŒì›ê°€ì… -->
    <div class="tab-bar">
      <button class="tab-btn active" onclick="switchTab('login', this)">ë¡œê·¸ì¸</button>
      <button class="tab-btn" onclick="switchTab('signup', this)">íšŒì›ê°€ì…</button>
    </div>

    <!-- â”€â”€ ì†Œì…œ ë¡œê·¸ì¸ â”€â”€ -->
    <button class="social-btn btn-google" onclick="socialLogin('Google')">
      <span class="social-icon">
        <!-- Google SVG ë¡œê³  -->
        <svg width="18" height="18" viewBox="0 0 48 48">
          <path fill="#EA4335" d="M24 9.5c3.5 0 6.6 1.2 9.1 3.2l6.8-6.8C35.8 2.5 30.3 0 24 0 14.8 0 6.9 5.4 3 13.3l7.9 6.1C12.8 13 17.9 9.5 24 9.5z"/>
          <path fill="#4285F4" d="M46.5 24.5c0-1.6-.1-3.1-.4-4.5H24v8.5h12.7c-.6 3-2.3 5.5-4.8 7.2l7.5 5.8c4.4-4 7.1-10 7.1-17z"/>
          <path fill="#FBBC05" d="M10.9 28.6A14.5 14.5 0 0 1 9.5 24c0-1.6.3-3.2.8-4.6L2.4 13.3A23.9 23.9 0 0 0 0 24c0 3.9.9 7.5 2.6 10.7l8.3-6.1z"/>
          <path fill="#34A853" d="M24 48c6.2 0 11.4-2 15.2-5.5l-7.5-5.8c-2 1.4-4.6 2.2-7.7 2.2-6.1 0-11.2-4-13.1-9.4l-8 6.2C6.8 42.5 14.8 48 24 48z"/>
        </svg>
      </span>
      <span class="social-label">Googleë¡œ ê³„ì†í•˜ê¸°</span>
    </button>

    <button class="social-btn btn-kakao" onclick="socialLogin('Kakao')">
      <span class="social-icon">
        <!-- Kakao ë¡œê³  -->
        <svg width="20" height="19" viewBox="0 0 24 23" fill="#191600">
          <path d="M12 0C5.4 0 0 4.2 0 9.3c0 3.3 2.1 6.2 5.3 7.9L4 22.5l6.3-4.2c.6.1 1.1.1 1.7.1 6.6 0 12-4.2 12-9.3S18.6 0 12 0z"/>
        </svg>
      </span>
      <span class="social-label">ì¹´ì¹´ì˜¤ë¡œ ê³„ì†í•˜ê¸°</span>
    </button>

    <button class="social-btn btn-naver" onclick="socialLogin('Naver')">
      <span class="social-icon">
        <!-- Naver ë¡œê³  -->
        <svg width="18" height="18" viewBox="0 0 24 24" fill="white">
          <path d="M16.3 12.6L7.2 0H0v24h7.7V11.4L16.8 24H24V0h-7.7z"/>
        </svg>
      </span>
      <span class="social-label">ë„¤ì´ë²„ë¡œ ê³„ì†í•˜ê¸°</span>
    </button>

    <!-- êµ¬ë¶„ì„  -->
    <div class="divider">ë˜ëŠ” ì´ë©”ì¼ë¡œ</div>

    <!-- â”€â”€ ì´ë©”ì¼ í¼ â”€â”€ -->
    <form id="email-form" onsubmit="emailLogin(event)">
      <div class="form-group">
        <label class="form-label" for="email">ì´ë©”ì¼</label>
        <input type="email" id="email" class="form-input"
          placeholder="name@example.com" autocomplete="email" required>
      </div>

      <div class="form-group" id="nickname-group" style="display:none">
        <label class="form-label" for="nickname">ë‹‰ë„¤ì„ <span style="color:#64748b;font-weight:400">(ëŒ“ê¸€ ì‘ì„± ì‹œ í‘œì‹œ)</span></label>
        <input type="text" id="nickname" class="form-input" placeholder="2~12ì, ì˜ë¬¸Â·í•œê¸€Â·ìˆ«ìÂ·_"
          autocomplete="username" minlength="2" maxlength="12"
          oninput="this.value=this.value.replace(/[^\w\uAC00-\uD7A3]/g,'')">
        <div id="nickname-hint" style="font-size:.72rem;color:#64748b;margin-top:4px"></div>
      </div>

      <div class="form-group">
        <label class="form-label" for="password">ë¹„ë°€ë²ˆí˜¸</label>
        <input type="password" id="password" class="form-input"
          placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" autocomplete="current-password" required minlength="8">
      </div>

      <a href="#" class="forgot-link" id="forgot-link" onclick="forgotPassword(event)">ë¹„ë°€ë²ˆí˜¸ë¥¼ ìŠìœ¼ì…¨ë‚˜ìš”?</a>

      <button type="submit" class="btn-submit" id="submit-btn">ë¡œê·¸ì¸</button>
    </form>

    <!-- í•˜ë‹¨ ë§í¬ -->
    <div class="card-footer-links">
      <a href="/landing">í™ˆìœ¼ë¡œ</a>
      <a href="/index">ë‘˜ëŸ¬ë³´ê¸°</a>
    </div>

    <!-- ë²•ì  ê³ ì§€ -->
    <p class="legal-text">
      ê³„ì† ì§„í–‰í•˜ë©´ CORRYUì˜
      <a href="#">ì„œë¹„ìŠ¤ ì•½ê´€</a> ë° <a href="#">ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨</a>ì— ë™ì˜í•˜ëŠ” ê²ƒìœ¼ë¡œ ê°„ì£¼ë©ë‹ˆë‹¤.
    </p>

  </div>
</div>

<!-- Toast -->
<div class="toast" id="toast"></div>

<script>
// â”€â”€ íƒ­ ì „í™˜ (ë¡œê·¸ì¸ / íšŒì›ê°€ì…) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let currentTab = 'login';

function switchTab(tab, el) {
  currentTab = tab;
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  el.classList.add('active');

  const nickGroup  = document.getElementById('nickname-group');
  const forgotLink = document.getElementById('forgot-link');
  const submitBtn  = document.getElementById('submit-btn');
  const passInput  = document.getElementById('password');

  if (tab === 'signup') {
    nickGroup.style.display  = 'block';
    forgotLink.style.display = 'none';
    submitBtn.textContent    = 'ê³„ì • ë§Œë“¤ê¸°';
    passInput.setAttribute('placeholder', '8ì ì´ìƒì˜ ë¹„ë°€ë²ˆí˜¸');
    passInput.setAttribute('autocomplete', 'new-password');
  } else {
    nickGroup.style.display  = 'none';
    forgotLink.style.display = 'block';
    submitBtn.textContent    = 'ë¡œê·¸ì¸';
    passInput.setAttribute('placeholder', 'â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢');
    passInput.setAttribute('autocomplete', 'current-password');
  }
}

// â”€â”€ ì†Œì…œ ë¡œê·¸ì¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function socialLogin(provider) {
  if (!CorryuAuth.isConfigured) {
    showToast('âš™ï¸ Supabaseë¥¼ ë¨¼ì € ì—°ê²°í•˜ì„¸ìš” (supabase-client.js)');
    return;
  }
  setLoading(true);
  try {
    await CorryuAuth.signInWithOAuth(provider);
    // OAuthëŠ” ë¦¬ë””ë ‰ì…˜ì´ë¯€ë¡œ ì—¬ê¸°ì„œ ì²˜ë¦¬ ë¶ˆí•„ìš”
  } catch(e) {
    showToast('âŒ ' + (e.message || 'ì†Œì…œ ë¡œê·¸ì¸ ì‹¤íŒ¨'));
    setLoading(false);
  }
}

// â”€â”€ ë‹‰ë„¤ì„ ì¤‘ë³µ ê²€ì‚¬ (ë””ë°”ìš´ìŠ¤) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let _nickTimer;
document.addEventListener('DOMContentLoaded', () => {
  document.getElementById('nickname').addEventListener('input', function() {
    clearTimeout(_nickTimer);
    const v = this.value.trim();
    const hint = document.getElementById('nickname-hint');
    if (v.length < 2) { hint.textContent = ''; return; }
    hint.textContent = 'í™•ì¸ ì¤‘...'; hint.style.color = '#64748b';
    _nickTimer = setTimeout(async () => {
      const taken = await CorryuAuth.isNicknameTaken(v);
      if (taken) { hint.textContent = 'ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ë‹‰ë„¤ì„ì…ë‹ˆë‹¤.'; hint.style.color = '#f87171'; }
      else        { hint.textContent = 'âœ“ ì‚¬ìš© ê°€ëŠ¥í•œ ë‹‰ë„¤ì„ì…ë‹ˆë‹¤.'; hint.style.color = '#4ade80'; }
    }, 600);
  });
});

// â”€â”€ ì´ë©”ì¼ ë¡œê·¸ì¸ / íšŒì›ê°€ì… â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function emailLogin(e) {
  e.preventDefault();
  if (!CorryuAuth.isConfigured) {
    showToast('âš™ï¸ Supabaseë¥¼ ë¨¼ì € ì—°ê²°í•˜ì„¸ìš” (supabase-client.js)');
    return;
  }
  const email    = document.getElementById('email').value.trim();
  const password = document.getElementById('password').value;
  setLoading(true);

  try {
    if (currentTab === 'signup') {
      const nickname = document.getElementById('nickname').value.trim();
      if (!nickname || nickname.length < 2) {
        showToast('ë‹‰ë„¤ì„ì„ 2ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.'); setLoading(false); return;
      }
      const taken = await CorryuAuth.isNicknameTaken(nickname);
      if (taken) { showToast('ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ë‹‰ë„¤ì„ì…ë‹ˆë‹¤.'); setLoading(false); return; }

      await CorryuAuth.signUp(email, password, nickname);
      showToast('âœ… ê°€ì… ì™„ë£Œ! ì´ë©”ì¼ì„ í™•ì¸í•´ ì¸ì¦ í›„ ë¡œê·¸ì¸í•˜ì„¸ìš”.', 5000);
    } else {
      await CorryuAuth.signIn(email, password);
      showToast('âœ… ë¡œê·¸ì¸ ì„±ê³µ!');
      // ì´ì „ í˜ì´ì§€ ë˜ëŠ” ëŒ€ì‹œë³´ë“œë¡œ ì´ë™
      const redirect = new URLSearchParams(location.search).get('redirect') || '/index';
      setTimeout(() => { location.href = redirect; }, 800);
    }
  } catch(err) {
    const msg = err.message || 'ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
    const friendly = msg.includes('Invalid login') ? 'ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.'
                   : msg.includes('already registered') ? 'ì´ë¯¸ ê°€ì…ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.'
                   : msg.includes('Password should be') ? 'ë¹„ë°€ë²ˆí˜¸ëŠ” 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.'
                   : msg;
    showToast('âŒ ' + friendly);
  } finally { setLoading(false); }
}

// â”€â”€ ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function forgotPassword(e) {
  e.preventDefault();
  const email = document.getElementById('email').value.trim();
  if (!email) { showToast('ë¨¼ì € ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }
  if (!CorryuAuth.isConfigured) { showToast('âš™ï¸ Supabaseë¥¼ ë¨¼ì € ì—°ê²°í•˜ì„¸ìš”.'); return; }
  try {
    await CorryuAuth.resetPassword(email);
    showToast('ğŸ“§ ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ë©”ì¼ì„ ë°œì†¡í–ˆìŠµë‹ˆë‹¤.', 5000);
  } catch(e) { showToast('âŒ ' + e.message); }
}

// â”€â”€ ë²„íŠ¼ ë¡œë”© ìƒíƒœ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function setLoading(on) {
  const btn = document.getElementById('submit-btn');
  btn.disabled    = on;
  btn.textContent = on ? 'ì²˜ë¦¬ ì¤‘â€¦' : (currentTab === 'signup' ? 'ê³„ì • ë§Œë“¤ê¸°' : 'ë¡œê·¸ì¸');
}

// â”€â”€ ì´ë¯¸ ë¡œê·¸ì¸ëœ ê²½ìš° ë¦¬ë””ë ‰ì…˜ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
(async () => {
  if (!CorryuAuth.isConfigured) return;
  const user = await CorryuAuth.getUser();
  if (user) {
    const redirect = new URLSearchParams(location.search).get('redirect') || '/index';
    location.href = redirect;
  }
})();

// â”€â”€ Toast ì•Œë¦¼ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let _toastTimer;
function showToast(msg, ms = 3500) {
  const el = document.getElementById('toast');
  el.textContent = msg;
  el.classList.add('show');
  clearTimeout(_toastTimer);
  _toastTimer = setTimeout(() => el.classList.remove('show'), ms);
}

// â”€â”€ i18n ì´ˆê¸°í™” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
window.addEventListener('DOMContentLoaded', () => {
  I18n.init();
});
</script>
</body>
</html>
