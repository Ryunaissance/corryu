# 포트폴리오 최적 비율 탐색 프로젝트

## 🎯 핵심 목적

**시간 편향(Recency Bias)을 제거한 상태에서**, 매월 $1,600 DCA + 연 단위 리밸런싱 전략으로  
15년间 수익을 극대화하는 ETF 포트폴리오 **최적 고정 비율**을 찾는다.

---

## 🧠 핵심 철학: 왜 시간 편향을 제거해야 하는가?

> *"최근 성적이 좋다고 더 많이 담고, 최근 성적이 나쁘다고 덜 담는 것은 감정적 투자다."*

| 편향 사례 | 문제점 |
|---|---|
| 반도체(SMH)·기술주(QQQ)가 최근 급등 → 비중 과다 배분 | 고점 추격 위험, 사이클 정점일 수 있음 |
| 채권(TLT·SHY)이 최근 부진 → 포폴에서 제외 | 장기 헤지 역할을 무시, 위기 시 보호막 상실 |
| 금(GLD)·유틸리티(XLU)가 지루하게 보임 → 비중 축소 | 인플레이션 방어·저변동성 자산의 역할 무시 |

**해결책**: 2005년~현재의 **전체 월별 수익률 풀(Pool)** 에서 무작위 복원 추출(Bootstrapping)하여
과거 어느 시점의 수익률도 동일한 확률로 반영되게 한다. 이를 10,000번 반복하면
"어떤 시기에 투자를 시작했어도" 발생할 수 있는 다양한 미래를 시뮬레이션한다.

---

## 📋 분석 조건

| 항목 | 설정값 |
|---|---|
| 월 납입액 (DCA) | $1,600 |
| 투자 기간 | 15년 (180개월) |
| 리밸런싱 주기 | 연 1회 (매년 초 고정 비율로 복원) |
| 시뮬레이션 횟수 | 10,000회 (몬테카를로) |
| 데이터 소스 | Yahoo Finance (실제 가격, 배당 조정 완료) |
| 데이터 시작점 | 각 ETF 상장일 기준 가능한 최장 시계열 |

---

## 🧪 후보 ETF 유니버스 (13종)

| 구분 | 티커 | 설명 | 역할 |
|---|---|---|---|
| 반도체 | SMH | VanEck 반도체 ETF | 고수익 성장 |
| 기술주 레버리지 | QLD | ProShares Ultra QQQ (2x) | 고수익 고위험 |
| 기술주 | QQQ | Invesco Nasdaq 100 | 성장 코어 |
| 유틸리티 | XLU | SPDR 유틸리티 | 방어·배당 |
| 금 | GLD | SPDR Gold Shares | 인플레이션 헤지 |
| 금 레버리지 | DGP | DB Gold Double Long (2x) | 금 레버리지 |
| 장기국채 | TLT | iShares 20yr+ 국채 | 경기침체 헤지 |
| 단기국채 | SHY | iShares 1-3yr 국채 | 안전자산·현금성 |
| 철강 | SLX | VanEck 철강 ETF | 원자재·경기 민감 |
| 우라늄 | URA | Global X 우라늄 ETF | 에너지 전환 테마 |
| 원자력 | NLR | VanEck 원자력·청정에너지 | 에너지 전환 테마 |
| 달러 | UUP | Invesco DB 달러 인덱스 | 달러 강세 헤지 |

> 📌 GLD 중복 제거 후 최종 12종에서 **최적 조합 11종**과 각 비율을 탐색한다.

---

## 🏆 최적화 기준 (목적함수)

### 1순위: 소르티노 비율 ≥ 1.5 (50th percentile 기준)
- 단순 수익률 극대화가 아닌 **하방 리스크 대비 수익** 효율성 확보
- 소르티노 = (포트폴리오 수익률 - 무위험이자율) / 하방 표준편차
- **중위(50th percentile)** 기준: "평균적인 평행우주"에서도 안정적이어야 함

### 2순위: 15년 후 최종 자산 극대화
- 소르티노 ≥ 1.5 조건을 만족하는 비율 조합 중 중위 최종 자산이 가장 큰 것 선택

---

## 📊 출력 결과물

1. **상위 포트폴리오 랭킹 테이블** (소르티노 순 정렬)
   - 각 ETF 비율 (%)
   - 중위 최종 자산 ($)
   - 소르티노 비율 (50th)
   - 10th / 90th percentile 최종 자산

2. **붓스트래핑 분포 요약**
   - 하위 10% / 중위 50% / 상위 10% 시나리오별 최종 자산

---

## 📁 파일 구조

```
코이핀 + 포트폴리오 비쥬얼라이저 상관계수/
├── PURPOSE.md          ← 이 파일 (프로젝트 목적 및 방법론)
└── analysis.py         ← 몬테카를로 시뮬레이션 + 최적화 엔진
```

---

*최종 수정: 2026-02-20*
